# TRPG写作工坊 📜🎲

一个中文化的、模块化的、所见即所得的泛用性TRPG（桌面角色扮演游戏）写作工具。

## ✨ 功能特性

### 编辑器
- **Markdown实时预览** — 左侧编辑、右侧实时渲染
- **多文件管理** — 支持创建、切换、关闭多个文档
- **自动保存** — 2秒无操作自动保存到浏览器本地存储
- **可调节布局** — 拖动分割线调整编辑器/预览区域大小

### 格式化工具栏
- 多层级标题（H1-H4）
- 粗体、斜体、删除线、高亮
- 有序/无序列表
- 引用块、分隔线、代码块
- 表格插入
- 图片、超链接插入
- 字体选择、文字颜色、背景颜色

### TRPG专属功能
- 📜 **提示框** — `{{note ... }}` 创建风格化提示框
- ⚠️ **警告框** — `{{warning ... }}` 创建警告框
- 🐉 **怪物属性块** — `{{stat-block ... }}` 创建D&D风格的怪物属性卡
- ✨ **法术卡片** — `{{spell ... }}` 创建法术描述卡
- 🛡️ **物品卡片** — `{{item ... }}` 创建物品描述卡
- 🎲 **行内骰子** — `[[2d6+3]]` 创建可点击的骰子按钮
- 📄 **分页/分栏** — `\page` 和 `\column` 控制页面布局

### 骰子工具
- 支持标准骰子表达式（1d20, 2d6+3, 4d6kh3等）
- 快捷骰子按钮（D4-D100）
- 骰点历史记录

### 导出
- **PDF导出** — 通过浏览器打印功能导出为PDF
- **HTML导出** — 导出为独立的HTML文件（含内嵌样式）

### 设置
- 暗色/亮色主题切换
- 编辑器字号调节
- 预览页面样式：羊皮纸风格 / 现代简约 / 暗黑奇幻

## 🚀 快速开始

### 在线使用
直接访问 GitHub Pages 部署地址即可使用。

### 本地开发

```bash
# 安装依赖
npm install

# 启动开发服务器
npm run dev

# 构建生产版本
npm run build
```

### 部署到 GitHub Pages

1. Fork 本仓库
2. 在仓库 Settings → Pages 中选择 GitHub Actions 部署
3. 或手动构建后将 `dist` 目录内容推送到 `gh-pages` 分支

## 🎯 扩展语法参考

### 提示框
```markdown
{{note
##### 提示标题
提示内容写在这里，支持**Markdown**语法。
}}
```

### 怪物属性块
```markdown
{{stat-block
### 地精
*小型 人形生物，中立邪恶*

**护甲等级** 15（皮甲、盾牌）
**生命值** 7（2d6）
**速度** 30尺

| 力量 | 敏捷 | 体质 | 智力 | 感知 | 魅力 |
|:----:|:----:|:----:|:----:|:----:|:----:|
| 8(-1) | 14(+2) | 10(+0) | 10(+0) | 8(-1) | 8(-1) |
}}
```

### 行内骰子
```markdown
投掷攻击：[[1d20+5]]
伤害：[[2d6+3]]
```

### 高亮文本
```markdown
这是==高亮文本==的示例。
```

## 📁 项目结构

```
TRPGwriter/
├── index.html          # 主HTML文件
├── vite.config.js      # Vite构建配置
├── package.json        # 项目配置
├── public/
│   └── favicon.svg     # 网站图标
└── src/
    ├── main.js         # 应用入口 & 事件管理
    ├── parser.js       # Markdown解析器（含TRPG扩展）
    ├── dice.js         # 骰子引擎
    ├── toolbar.js      # 工具栏动作
    ├── storage.js      # IndexedDB存储管理
    └── style.css       # 完整样式系统
```

## 🛠️ 技术栈

- **Vite** — 构建工具
- **Vanilla JS** — 无框架依赖，轻量高效
- **Marked.js** — Markdown解析
- **DOMPurify** — HTML安全过滤
- **IndexedDB** — 本地数据持久化
- **Google Fonts** — 思源宋体、思源黑体、站酷小薇体

## 📄 开源协议

MIT License
